#### npm

 1. åˆ†åˆ«ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®å…¨å±€çš„å®‰è£…åŒ…ç›®å½•ï¼š

    ``` 
    npm config set prefix "D:\Program Files\nodejs\node_global"
    npm config set cache "D:\Program Files\nodejs\node_cache"
    
    é…ç½®æ¡ç›®å«ä¹‰ï¼š
    => registryï¼šnpm intallé»˜è®¤ä¸‹è½½ä½ç½®ï¼›
    => prefixï¼šnpmå…¨å±€æ¨¡å—å®‰è£…ä½ç½®ï¼›
    => cacheï¼šnpmç¼“å­˜æ–‡ä»¶ä¿å­˜ä½ç½®ï¼›
    
    é…ç½®æ–‡ä»¶ä½ç½®ï¼š
    => userconfigï¼šnpmçš„ä¸ªæ€§åŒ–é…ç½®ï¼Œnpmä¼šä¸ºç”µè„‘ä¸­æ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªä¸ªæ€§åŒ–é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ”¾åœ¨æ¯ä¸ªç”¨æˆ·çš„homeè·¯å¾„ä¸‹ã€‚æˆ‘ä»¬ä½¿ç”¨npm config setå‘½ä»¤ä¿®æ”¹é…ç½®æ—¶ï¼Œnpmå¹¶ä¸ä¼šå»ä¿®æ”¹å…¨å±€é…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯ä¼šä¿®æ”¹è¿™ä¸ªä¿®æ”¹åŒ–é…ç½®æ–‡ä»¶ã€‚
        é…ç½®æ–‡ä»¶ä½ç½®ï¼šC:\Users\ilmango\.npmrc
        prefix=C:\Program Files\nodejs
        cache=F:\.npm-cache
        registry=https://registry.npmmirror.com/
        home=https://npm.taobao.org
       
    => globalconfigï¼šå…¨å±€é…ç½®ï¼Œæ‰€æœ‰ç”¨æˆ·å…±äº«çš„é…ç½®æ–‡ä»¶ã€‚
       é…ç½®æ–‡ä»¶ä½ç½®ï¼šD:\nvm\v16.13.0\node_modules\npm\.npmrc
    ```

2. npm å¸¸ç”¨å‘½ä»¤ç®€å†™è¯´æ˜ï¼š

   ```js
   -gï¼š ä¸º --global çš„ç¼©å†™ï¼Œè¡¨ç¤ºå®‰è£…åˆ°å…¨å±€ç›®å½•é‡Œ
   -Sï¼š ä¸º --save çš„ç¼©å†™ï¼Œè¡¨ç¤ºå®‰è£…çš„åŒ…å°†å†™å…¥package.jsoné‡Œé¢çš„dependencies
   -Dï¼š ä¸º --save-dev çš„ç¼©å†™ï¼Œè¡¨ç¤ºå°†å®‰è£…çš„åŒ…å°†å†™å…¥packege.jsoné‡Œé¢çš„devDependencies
    iï¼š ä¸ºinstallçš„ç¼©å†™ï¼Œè¡¨ç¤ºå®‰è£…
   ```

3. npm å®‰è£…æ¨¡å—ï¼š

   ``` js
   npm init  				// npm åˆå§‹åŒ–å½“å‰ç›®å½•
   npm i  					// å®‰è£…æ‰€æœ‰ä¾èµ–
   npm i express 		    // å®‰è£…æ¨¡å—åˆ°é»˜è®¤dependencies
   npm i express -g 		// ä¼šå®‰è£…åˆ°é…ç½®çš„å…¨å±€ç›®å½•ä¸‹
   npm i express -S  		// å®‰è£…åŒ…ä¿¡æ¯å°†åŠ å…¥åˆ°dependenciesç”Ÿäº§ä¾èµ–
   npm i express -D  		// å®‰è£…åŒ…ä¿¡æ¯å°†åŠ å…¥åˆ°devDependencieså¼€å‘ä¾èµ–
   npm i jquery@1.8.3  	// å®‰è£…jqueryæŒ‡å®šçš„1.8.3ç‰ˆæœ¬
   npm i jquery@latest     // å®‰è£…jqueryæœ€æ–°ç‰ˆæœ¬
   
   npm install git+https://github.com/EricXie79/GP22.git
   //å¯ä»¥å°†gitä¸Šçš„å†…å®¹æ‹‰ä¸‹æ¥ï¼Œä½†æ˜¯è¦æœ‰keygenæƒé™
   ```

4. npm å¸è½½æ¨¡å—ï¼š

   ``` js
   npm uninstall express  				// å¸è½½æ¨¡å—ï¼Œä½†ä¸å¸è½½æ¨¡å—ç•™åœ¨package.jsonä¸­çš„å¯¹åº”ä¿¡æ¯
   npm uninstall express -g  			// å¸è½½å…¨å±€æ¨¡å—
   npm uninstall express --save  		// å¸è½½æ¨¡å—ï¼ŒåŒæ—¶å¸è½½ç•™åœ¨package.jsonä¸­dependenciesä¸‹çš„ä¿¡æ¯
   npm uninstall express --save-dev    // å¸è½½æ¨¡å—ï¼ŒåŒæ—¶å¸è½½ç•™åœ¨package.jsonä¸­devDependenciesä¸‹çš„ä¿¡æ¯
   ```

5. npm æ›´æ–°æ¨¡å—ï¼š

   ``` js
   npm update jquery 			  // æ›´æ–°æœ€æ–°ç‰ˆæœ¬çš„jquery
   npm update jquery@2.1.0  	  // æ›´æ–°åˆ°æŒ‡å®šç‰ˆæœ¬å·çš„jquery
   npm install jquery@latest     // å¯ä»¥ç›´æ¥æ›´æ–°åˆ°æœ€åä¸€ä¸ªæ–°ç‰ˆæœ¬
   
   // ä½¿ç”¨ â€˜npm i åŒ…å@ç‰ˆæœ¬å·â€™ å½¢å¼æ¥æ›´æ–°åŒ…çš„æ–¹å¼æ›´å¸¸è§ï¼Œä¹Ÿæ›´æ–¹ä¾¿
   ```

6. npm æŸ¥çœ‹å‘½ä»¤ï¼š

   ``` js
   npm root                     		 // æŸ¥çœ‹é¡¹ç›®ä¸­æ¨¡å—æ‰€åœ¨çš„ç›®å½•
   npm root -g                  		 // æŸ¥çœ‹å…¨å±€å®‰è£…çš„æ¨¡å—æ‰€åœ¨ç›®å½•
   npm list æˆ–è€… npm ls          	    // æŸ¥çœ‹æœ¬åœ°å·²å®‰è£…æ¨¡å—çš„æ¸…å•åˆ—è¡¨
   npm view jquery dependencies 		 // æŸ¥çœ‹æŸä¸ªåŒ…å¯¹äºå„ç§åŒ…çš„ä¾èµ–å…³ç³»
   npm view jquery version      		 // æŸ¥çœ‹jqueryæœ€æ–°çš„ç‰ˆæœ¬å·
   npm view jquery versions     		 // æŸ¥çœ‹æ‰€æœ‰jqueryå†å²ç‰ˆæœ¬å·ï¼ˆå¾ˆå®ç”¨ï¼‰
   npm view jquery              		 // æŸ¥çœ‹æœ€æ–°çš„jqueryç‰ˆæœ¬çš„ä¿¡æ¯
   npm info jquery 			 		 // æŸ¥çœ‹jqueryçš„è¯¦ç»†ä¿¡æ¯ï¼Œç­‰åŒäºä¸Šé¢çš„npm view jquery
   npm list jquery æˆ– npm ls jquery     // æŸ¥çœ‹æœ¬åœ°å·²å®‰è£…çš„jqueryçš„è¯¦ç»†ä¿¡æ¯
   npm view jquery repository.url       // æŸ¥çœ‹jqueryåŒ…çš„æ¥æºåœ°å€
   ```

7. npm å…¶ä»–å‘½ä»¤ï¼š

   ``` js
   npm cache clean             // æ¸…é™¤npmçš„ç¼“å­˜
   npm prune                   // æ¸…é™¤é¡¹ç›®ä¸­æ²¡æœ‰è¢«ä½¿ç”¨çš„åŒ…
   npm outdated                // æ£€æŸ¥æ¨¡å—æ˜¯å¦å·²ç»è¿‡æ—¶
   npm repo jquery             // ä¼šæ‰“å¼€é»˜è®¤æµè§ˆå™¨è·³è½¬åˆ°githubä¸­jqueryçš„é¡µé¢
   npm docs jquery             // ä¼šæ‰“å¼€é»˜è®¤æµè§ˆå™¨è·³è½¬åˆ°githubä¸­jqueryçš„README.MDæ–‡ä»¶ä¿¡æ¯
   npm home jquery             // ä¼šæ‰“å¼€é»˜è®¤æµè§ˆå™¨è·³è½¬åˆ°githubä¸­jqueryçš„ä¸»é¡µ
   ```

8. æ¸…é™¤ç¼“å­˜ç¼“å­˜ï¼š

   ``` js
   // é”™è¯¯ç æ˜¯-4048éœ€è¦æ¸…é™¤
   npm cache verify
   npm cache clean  --force
   ```

9. é‡è®¾ä»£ç†ï¼š

   ``` js
   // æŸ¥çœ‹ä»£ç†
   npm config get proxy
   npm config get https-proxy
   
   // è®¾ç½®ä»£ç†ï¼Œé”™è¯¯å†…å®¹ ECONNREFUSED ä¸€ç›´è¿æ¥ä¸ä¸Š
   npm config set proxy null
   npm config set https-proxy null
   ```

10. npmåˆå§‹åŒ–package.jsonæ–‡ä»¶ï¼š

   ``` js
   npm  init [-y]              // -yè¡¨ç¤ºé™é»˜åˆå§‹åŒ–ï¼Œè‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼
   ```

11. å‘å¸ƒnpmåŒ…ï¼š

    - æ³¨å†Œnpmè´¦å·ï¼š https://www.npmjs.com/

    - åœ¨å‘½ä»¤è¡Œç™»å½•ï¼š npm login

    - ä¿®æ”¹package.jsonï¼š

      ``` js
      {
          "name": "hy_test_utils", # æ¨¡å—åä¸€å®šè¦å”¯ä¸€
          "version": "1.0.0", # ç‰ˆæœ¬è¦ç¬¦åˆsemverè§„èŒƒ
          "description": "a test utils",
          "main": "index.js", # å…¥å£æ–‡ä»¶ï¼Œåœ¨scriptä¸­ä½¿ç”¨è„šæœ¬ä¸æŒ‡å®šæ–‡ä»¶æ—¶é»˜è®¤å°±æ˜¯mainæŒ‡å®šçš„æ–‡ä»¶
          "scripts": {
              "test": "echo \"Error: no test specified\" && exit 1"
          },
          "config": {
              "PORT": 8080
          }
          "author": "coderwhy", # æ¨¡å—ä½œè€…
          "license": "MIT", # æ¨¡å—å¼€æºåè®®
          "repository": { # å­˜å‚¨æ¨¡å—çš„ä»“åº“
              "type": "git",
              "url": "https://github.com/coderwhy/coderwhy"
          },
          "homepage": "https://github.com/coderwhy/coderwhy", # æ¨¡å—ä¸»é¡µ
          "keywords": [ # å…³é”®å­—ï¼Œç”¨äºå¸®åŠ©åœ¨npmjs.comä¸­æœç´¢
              "why",                                   
              "coderwhy",
              "utils"
          ]
          devDependencies :{ # åœ¨å¼€å‘ã€æµ‹è¯•ç¯å¢ƒä¸­ç”¨åˆ°çš„ä¾èµ–
              // æ¨¡å—å¯ä»¥ä»gitä¸Šä¸‹æ‹‰
              "gp22" :"git+ssh://git@github.com:EricXie79/GP22.git"
          }  
          dependencies: { # åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦ç”¨åˆ°çš„ä¾èµ–
              // dependenciesç‰ˆæœ¬ä¸­çš„é”å®š
              "jQuery" : "^3.1.0"     é”å®šå¤§ç‰ˆæœ¬major
              "jQuery" : "~3.1.0"     é”å®šå¤§ç‰ˆæœ¬å’Œå°ç‰ˆæœ¬minor
              "jQuery" : "3.1.0"      é”å®šæ‰€æœ‰ç‰ˆæœ¬
              "jQuery" : "*"          æœ€æ–°ç‰ˆæœ¬  
          }
      }
      ```

    - æ’°å†™README.mdæ–‡ä»¶ï¼šè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ä¼šæ˜¾ç¤ºåœ¨æ¨¡å—é¡µä¸­

    - å‘å¸ƒåˆ°npm registryä¸Šï¼šnpm publish [<folder>]

12. æ›´æ–°npmä»“åº“ï¼šä¿®æ”¹ç‰ˆæœ¬å·(æœ€å¥½ç¬¦åˆsemverè§„èŒƒ)ï¼Œå› ä¸ºä¸€ä¸ªåŒ…ä¸èƒ½å­˜åœ¨ä¸¤ä¸ªç›¸åŒç‰ˆæœ¬å·ï¼Œç„¶åé‡æ–°å‘å¸ƒï¼š

    ``` js
    npm publish
    ```

13. åˆ é™¤å‘å¸ƒçš„åŒ…ï¼š

    ``` js
    npm unpublish <pkg>[@<version>]
    ```

14. è®©å‘å¸ƒçš„åŒ…è¿‡æœŸï¼š

    ``` js
    // è¯­æ³•
    npm deprecate <pkg>[@<version range>] <message>
        
    npm deprecate my-thing@"< 0.2.3" "critical bug fixed in v0.2.3"
    // æç¤ºä¸‹è½½è¯¥åŒ…0.2.3ä»¥å‰ç‰ˆæœ¬çš„ç”¨æˆ·:"critical bug fixed in v0.2.3"
    
    npm deprecate my-thing@1.x "1.x is no longer supported"
    // æç¤ºä¸‹è½½è¯¥åŒ…1.xç‰ˆæœ¬çš„ç”¨æˆ·:"1.x is no longer supported"
    ```

15. ä½¿ç”¨package.jsonä¸­çš„configç»™é¡µé¢ä¼ å‚ï¼š

    ``` js
    // package.json
    "config": {
      "PORT": 8080
    }
    ```

    ```js
    // å¼€å§‹è¿è¡Œ
    node main.js
    
    // main.js
    console.log(process.env.npm_package_config_PORT)
    // 8080
    ```

16. ä½¿ç”¨cross-envè®¾ç½®ç¯å¢ƒå˜é‡ç»™é¡µé¢ä¼ å‚ï¼š

    > å½“è®¾ç½®ç¯å¢ƒå˜é‡ä¸º `NODE_ENV=production` æ—¶ï¼Œæ˜“é€ æˆ Windows å‘½ä»¤çš„é˜»å¡ã€‚ï¼ˆé™¤äº† Windows ä¸Šçš„ Bashï¼Œå› å…¶ä½¿ç”¨æœ¬æœº Bashï¼‰
    >
    > `cross-env` ä½¿ç”¨å•ä¸ªå‘½ä»¤ï¼Œè€Œä¸ç”¨æ‹…å¿ƒç¯å¢ƒå˜é‡çš„è®¾ç½®ã€‚åƒè¿è¡Œåœ¨ `POSIXç³»ç»Ÿ` ä¸Šä¸€æ ·è¿›è¡Œè®¾ç½®ï¼Œ`cross-env` å¯ä»¥è¿›è¡Œæ­£ç¡®çš„è®¾ç½®ã€‚
    >
    > ç®€è€Œè¨€ä¹‹å°±æ˜¯é€šè¿‡cross-envè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥å¾ˆå¥½çš„æ˜¯é€‚é…å¤šä¸ªå¹³å°ï¼Œæ— è¯­æ ¹æ®å¹³å°æ¥è®¾ç½®ç›¸å¯¹åº”çš„å˜é‡ã€‚

    - 1. å®‰è£…

    ```js
    npm install --save-dev cross-env
    ```

    - 2. ç”¨æ³•

    ``` js
    // package.json
    "scripts": {
        "start": "cross-env ENV=position node main.js",
    }
    ```

    ``` js
    // å¼€å§‹æ‰§è¡Œ
    npm run start
    
    // main.js
    console.log(process.env.ENV)
    // production
    ```

#### nvm

1. nvmé…ç½®æ–‡ä»¶ï¼š

   ``` 
   æ–‡ä»¶ä½ç½®ï¼šD:\nvm
   
   root: D:\nvm
   path: C:\Program Files\nodejs
   node_mirror: https://npm.taobao.org/mirrors/node/
   npm_mirror: https://npm.taobao.org/mirrors/npm/
   ```

2. nvmå¸¸ç”¨å‘½ä»¤ï¼š

   ``` js
   nvm list                       //æŸ¥çœ‹å·²å®‰è£…çš„nodejsç‰ˆæœ¬
   nvm list available             //æŸ¥çœ‹ç½‘ç»œä¸Šå¯ä»¥å®‰è£…çš„ç‰ˆæœ¬
   nvm on                         // å¯ç”¨node.jsç‰ˆæœ¬ç®¡ç†
   nvm off                        // ç¦ç”¨node.jsç‰ˆæœ¬ç®¡ç†(ä¸å¸è½½ä»»ä½•ä¸œè¥¿)
   nvm install <version>          // å®‰è£…node.jsçš„å‘½å versionæ˜¯ç‰ˆæœ¬å· ä¾‹å¦‚ï¼šnvm install 8.12.0
   nvm use <version>              //ä½¿ç”¨æŸä¸€versionçš„nodejs
   nvm uninstall <version>        // å¸è½½æŒ‡å®šç‰ˆæœ¬çš„nodejs
   ```


#### nrm

> â€˜npm registry managerâ€™ (å³ï¼šæŒ‡çš„æ˜¯ â€˜npmâ€™ çš„é•œåƒæºç®¡ç†å·¥å…·)ã€‚nrm çš„è¯ç”Ÿå°±æ˜¯ä¸ºäº†ä½¿ç”¨è€…åœ¨å„ä¸ªä¸åŒ npm æºä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œnpm æ˜¯å…¨ä¸–ç•Œæœ€å¤§çš„è½¯ä»¶æ³¨å†Œè¡¨ï¼Œæ¯å¤©æœ‰æ•°ä»¥ä¸‡è®¡çš„äººä»è¿™ä¸ªåœ°æ–¹ä¸‹è½½è½¯ä»¶ï¼Œnrm çš„ä½œç”¨å°±æ˜¯åˆ‡æ¢ä¸‹è½½ npm ä¸­èµ„æºçš„æœåŠ¡å™¨ã€‚ä¾‹å¦‚ï¼šä½ åœ¨å›½å†…ï¼Œä½ ä½¿ç”¨ npmè°·æ­Œ çš„æºä¸‹è½½è½¯ä»¶å°±é¾Ÿé€Ÿï¼Œä½†æ˜¯ä½ ä½¿ç”¨ npmæ·˜å® çš„æºå°±æ¯”è¾ƒå¿«ï¼Œè¿™æ—¶å€™ä½ å°±å¯ä»¥ä½¿ç”¨ nrm æ¥å¿«é€Ÿåˆ‡æ¢æºäº†ã€‚

> åŸæ¥ä¸‹è½½çš„åŒ…ï¼Œåˆšå¼€å§‹æ˜¯åªå­˜åœ¨äºå›½å¤–çš„ â€˜npmâ€™ æœåŠ¡å™¨ä¸Š,ä½†æ˜¯ç”±äºç½‘ç»œåŸå› ï¼Œç»å¸¸è®¿é—®ä¸åˆ°ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å›½å†…åˆ›å»ºä¸€ä¸ªå’Œå®˜ç½‘å®Œå…¨ä¸€æ ·çš„ â€˜npmâ€™ æœåŠ¡å™¨ï¼Œåªä¸è¿‡æ•°æ®éƒ½æ˜¯ä»äººå®¶é‚£é‡Œæ‹¿è¿‡æ¥çš„ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨æ–¹å¼ä¸æ–¹æ³•å®Œå…¨ä¸€æ ·ã€‚

- `nrm ls` æŸ¥çœ‹æ‰€æœ‰æºï¼Œæ˜¾ç¤ºç»“æœåŒ…æ‹¬ï¼šnpm æºåç§°ã€æºåœ°å€ç­‰ä¿¡æ¯ï¼›

- `npm use <registry>`ï¼šåˆ‡æ¢ npm æºåœ°å€ï¼›
- `nrm test [registry]`ï¼šæµ‹è¯•æºçš„è®¿é—®é€Ÿåº¦ï¼› ä¸åŠ  â€˜registryâ€™ æ—¶ï¼Œé»˜è®¤æµ‹è¯•æ‰€æœ‰çš„æºé€Ÿåº¦ï¼›

#### npx

> npxæ˜¯npm5.2ä¹‹åè‡ªå¸¦çš„ä¸€ä¸ªå‘½ä»¤ï¼Œnpxä¸»è¦ç”¨äºè°ƒç”¨é¡¹ç›®ä¸­çš„æŸä¸ªæ¨¡å—çš„æŒ‡ä»¤ï¼Œä»¥webpackä¸ºä¾‹ï¼Œæ¯”å¦‚å…¨å±€å®‰è£…çš„æ˜¯webpack5.1.3ï¼Œé¡¹ç›®å®‰è£…çš„æ˜¯webpack3.6.0è¿™æ—¶åœ¨ç»ˆç«¯æ‰§è¡Œ webpack --versionçš„è¯ï¼Œæ˜¾ç¤ºç»“æœä¼šæ˜¯ webpack 5.1.3ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨çš„æ˜¯å…¨å±€çš„ã€‚åŸå› éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨webpackå‘½ä»¤æ—¶ï¼Œå…¶å®æ˜¯åœ¨ç¯å¢ƒå˜é‡ä¸­å»å¯»æ‰¾ï¼Œè€Œé¡¹ç›®ä¸­çš„webpackæ˜¯å®‰è£…åœ¨node_modules/.binæ–‡ä»¶å¤¹ä¸­çš„ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯ä¸å­˜åœ¨äºç¯å¢ƒå˜é‡ä¸­çš„ï¼Œæ‰€ä»¥æ‰¾ä¸åˆ°ã€‚

å¦‚ä½•ä½¿ç”¨é¡¹ç›®ï¼ˆå±€éƒ¨ï¼‰ä¸­å®‰è£…çš„webpackï¼Ÿ

- æ–¹å¼ä¸€ï¼šæ˜ç¡®æŸ¥æ‰¾åˆ°node_moduleä¸‹é¢çš„webpackï¼š

  ```js
  ./node_modules/.bin/webpack --version
  ```

- æ–¹å¼äºŒï¼šåœ¨ scriptså®šä¹‰è„šæœ¬ï¼Œæ¥æ‰§è¡Œwebpackï¼š

  ``` js
  "scripts": {
      "webpack": "webpack --version"
  }
  ```

- æ–¹å¼ä¸‰ï¼šä½¿ç”¨npxï¼Œnpxçš„åŸç†éå¸¸ç®€å•ï¼Œå®ƒä¼šåˆ°å½“å‰ç›®å½•çš„node_modules/.binç›®å½•ä¸‹æŸ¥æ‰¾å¯¹åº”çš„å‘½ä»¤ï¼š

  ``` js
  npx webpack --version
  ```

#### pnpm

- ##### pnpmçš„ä¼˜åŠ¿ï¼š

  1. pnpm å†…éƒ¨ä½¿ç”¨`åŸºäºå†…å®¹å¯»å€`çš„æ–‡ä»¶ç³»ç»Ÿæ¥å­˜å‚¨ç£ç›˜ä¸Šæ‰€æœ‰çš„æ–‡ä»¶ï¼š
     - ä¸ä¼šé‡å¤å®‰è£…åŒä¸€ä¸ªåŒ…ã€‚ä½¿ç”¨`npm/yarn` çš„æ—¶å€™ï¼Œå¦‚æœ100ä¸ªåŒ…ä¾èµ–`lodash` ï¼Œé‚£ä¹ˆå°±å¯èƒ½å®‰è£…äº†100æ¬¡`lodash` ï¼Œç£ç›˜ä¸­å°±æœ‰100ä¸ªåœ°æ–¹å†™å…¥äº†è¿™éƒ¨åˆ†ä»£ç ã€‚ä½†æ˜¯`pnpm`ä¼šåªåœ¨ä¸€ä¸ªåœ°æ–¹å†™å…¥è¿™éƒ¨åˆ†ä»£ç ï¼Œåé¢ä½¿ç”¨ä¼šç›´æ¥ä½¿ç”¨`hard link`
     - å³ä½¿ä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œpnpm ä¹Ÿä¼šæå¤§ç¨‹åº¦åœ°å¤ç”¨ä¹‹å‰ç‰ˆæœ¬çš„ä»£ç ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ lodash æœ‰ 100 ä¸ªæ–‡ä»¶ï¼Œæ›´æ–°ç‰ˆæœ¬ä¹‹åå¤šäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆç£ç›˜å½“ä¸­å¹¶ä¸ä¼šé‡æ–°å†™å…¥ 101 ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯ä¿ç•™åŸæ¥çš„ 100 ä¸ªæ–‡ä»¶çš„ `hardlink`ï¼Œä»…ä»…å†™å…¥é‚£`ä¸€ä¸ªæ–°å¢çš„æ–‡ä»¶`ã€‚
  2. monorepo çš„å®—æ—¨å°±æ˜¯ç”¨ä¸€ä¸ª git ä»“åº“æ¥ç®¡ç†å¤šä¸ªå­é¡¹ç›®ï¼Œæ‰€æœ‰çš„å­é¡¹ç›®éƒ½å­˜æ”¾åœ¨æ ¹ç›®å½•çš„`packages`ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆä¸€ä¸ªå­é¡¹ç›®å°±ä»£è¡¨ä¸€ä¸ª`package`ã€‚
  3. ä¹‹å‰åœ¨ä½¿ç”¨ npm/yarn çš„æ—¶å€™ï¼Œç”±äº node_module çš„æ‰å¹³ç»“æ„ï¼Œå¦‚æœ A ä¾èµ– Bï¼Œ B ä¾èµ– Cï¼Œé‚£ä¹ˆ A å½“ä¸­æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ C çš„ï¼Œä½†é—®é¢˜æ˜¯ A å½“ä¸­å¹¶æ²¡æœ‰å£°æ˜ C è¿™ä¸ªä¾èµ–ã€‚å› æ­¤ä¼šå‡ºç°è¿™ç§éæ³•è®¿é—®çš„æƒ…å†µã€‚ ä½† pnpm è‡ªåˆ›äº†ä¸€å¥—ä¾èµ–ç®¡ç†æ–¹å¼ï¼Œå¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¿è¯äº†å®‰å…¨æ€§ã€‚

- ##### ä¾èµ–ç®¡ç†

  > pnpm ä¼šåœ¨å…¨å±€çš„ store ç›®å½•é‡Œå­˜å‚¨é¡¹ç›® `node_modules` æ–‡ä»¶çš„ `hard links` ã€‚å› ä¸ºè¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œå¯¼è‡´æ¯æ¬¡å®‰è£…ä¾èµ–çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯ä¸ªç›¸åŒçš„ä¾èµ–ï¼Œæœ‰å¥½å¤šé¡¹ç›®éƒ½ç”¨åˆ°è¿™ä¸ªä¾èµ–ï¼Œé‚£ä¹ˆè¿™ä¸ªä¾èµ–å®é™…ä¸Šæœ€ä¼˜æƒ…å†µ(å³ç‰ˆæœ¬ç›¸åŒ)åªç”¨å®‰è£…ä¸€æ¬¡ã€‚

  **ç¬¬ä¸€é˜¶æ®µï¼šnpm@3 ä¹‹å‰ç‰ˆæœ¬**

  ```text
  node_modules
  â””â”€ foo
     â”œâ”€ index.js
     â”œâ”€ package.json
     â””â”€ node_modules
        â””â”€ bar
           â”œâ”€ index.js
           â””â”€ package.json
  ```

  - ä¾èµ–æ ‘å±‚çº§å¤ªæ·±ï¼Œä¼šå¯¼è‡´ Windows ä¸Šçš„ç›®å½•è·¯å¾„è¿‡é•¿é—®é¢˜
  - ç›¸åŒåŒ…åœ¨ä¸åŒçš„ä¾èµ–é¡¹ä¸­éœ€è¦æ—¶ï¼Œä¼šå­˜åœ¨å¤šä¸ªç›¸åŒå‰¯æœ¬

  **ç¬¬äºŒé˜¶æ®µï¼šnpm@3 ç‰ˆæœ¬ï¼Œæ‰å¹³åŒ–å¤„ç†**

  æ‰€æœ‰çš„ä¾èµ–éƒ½è¢«æ‹å¹³åˆ°`node_modules`ç›®å½•ä¸‹ï¼Œä¸å†æœ‰å¾ˆæ·±å±‚æ¬¡çš„åµŒå¥—å…³ç³»ã€‚è¿™æ ·åœ¨å®‰è£…æ–°çš„åŒ…æ—¶ï¼Œæ ¹æ® node require æœºåˆ¶ï¼Œä¼šä¸åœå¾€ä¸Šçº§çš„`node_modules`å½“ä¸­å»æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ç›¸åŒç‰ˆæœ¬çš„åŒ…å°±ä¸ä¼šé‡æ–°å®‰è£…ï¼Œè§£å†³äº†å¤§é‡åŒ…é‡å¤å®‰è£…çš„é—®é¢˜ï¼Œè€Œä¸”ä¾èµ–å±‚çº§ä¹Ÿä¸ä¼šå¤ªæ·±ã€‚

  ```text
  node_modules
  â”œâ”€ foo
  |  â”œâ”€ index.js
  |  â””â”€ package.json
  â””â”€ bar
     â”œâ”€ index.js
     â””â”€ package.json
  ```

  ä½†è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜

  - ä¾èµ–ç»“æ„çš„**ä¸ç¡®å®šæ€§**ã€‚
  - æ‰å¹³åŒ–ç®—æ³•æœ¬èº«çš„**å¤æ‚æ€§**å¾ˆé«˜ï¼Œè€—æ—¶è¾ƒé•¿ã€‚
  - é¡¹ç›®ä¸­ä»ç„¶å¯ä»¥**éæ³•è®¿é—®**æ²¡æœ‰å£°æ˜è¿‡ä¾èµ–çš„åŒ…

  è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿä¾èµ–ç»“æ„çš„`ä¸ç¡®å®š`é—®é¢˜ï¼Œä¹Ÿæ˜¯ `lock æ–‡ä»¶`è¯ç”Ÿçš„åŸå› ï¼Œæ— è®ºæ˜¯`package-lock.json`(npm 5.xæ‰å‡ºç°)è¿˜æ˜¯`yarn.lock`ï¼Œéƒ½æ˜¯ä¸ºäº†ä¿è¯ install ä¹‹åéƒ½äº§ç”Ÿç¡®å®šçš„`node_modules`ç»“æ„ã€‚å°½ç®¡å¦‚æ­¤ï¼Œnpm/yarn æœ¬èº«è¿˜æ˜¯å­˜åœ¨`æ‰å¹³åŒ–ç®—æ³•å¤æ‚`å’Œ`package éæ³•è®¿é—®`çš„é—®é¢˜ï¼Œå½±å“æ€§èƒ½å’Œå®‰å…¨ã€‚

  **ç¬¬ä¸‰é˜¶æ®µï¼špnpm**

  ç”±äºæ‰å¹³åŒ–ç®—æ³•çš„æå…¶å¤æ‚ï¼Œä»¥åŠä¼šå­˜åœ¨å¤šé¡¹ç›®é—´ç›¸åŒä¾èµ–å‰¯æœ¬çš„æƒ…å†µã€‚pnpm åœ¨å°è¯•è§£å†³è¿™äº›é—®é¢˜æ—¶ï¼Œæ”¾å¼ƒäº†æ‰å¹³åŒ–å¤„ç† node_modules çš„æ–¹å¼ã€‚è€Œæ˜¯é‡‡ç”¨ **ç¡¬é“¾+è½¯é“¾** æ–¹å¼ã€‚

  ```text
  node_modules
  â”œâ”€ .pnpm
  |  â”œâ”€ foo@1.0.0/node_modules/foo
  |  |  â””â”€ index.js
  |  â””â”€ bar@2.0.0/node_modules/bar
  â”œâ”€ foo -> .pnpm/foo@1.0.0/node_modules/foo
  â””â”€ bar -> .pnpm/bar@2.0.0/node_modules/bar
  ```

  node_modules æ ¹ç›®å½•ä¸­çš„åŒ…åªæ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ã€‚`require('foo')` å°†æ‰§è¡Œ `node_modules/.pnpm/foo@1.0.0/node_modules/foo/indexjs` ä¸­çš„æ–‡ä»¶ï¼ˆè¿™é‡Œæ˜¯ç¡¬é“¾æ¥ï¼‰ï¼Œè€Œä¸æ˜¯ `node_modules/foo/index.js` ä¸­çš„æ–‡ä»¶ã€‚

  **è¿™ç§å¸ƒå±€ç»“æ„çš„ä¸€å¤§å¥½å¤„æ˜¯åªæœ‰çœŸæ­£åœ¨ä¾èµ–é¡¹ä¸­ï¼ˆpackage.json dependencesï¼‰çš„åŒ…æ‰èƒ½è®¿é—®**ï¼Œ**ä¸¾ä¸ªğŸŒ°**ï¼š

  å®‰è£…ä¸€ä¸ª`express` ä¾èµ–ï¼Œä¼šåœ¨ node_modules ä¸­å½¢æˆè¿™æ ·ä¸¤ä¸ªç›®å½•ç»“æ„:

  ```text
  node_modules/express/...
  node_modules/.pnpm/express@4.17.1/node_modules/xxx
  ```

  å…¶ä¸­ç¬¬ä¸€ä¸ªè·¯å¾„æ˜¯ nodejs æ­£å¸¸å¯»æ‰¾è·¯å¾„ä¼šå»æ‰¾çš„ä¸€ä¸ªç›®å½•ï¼Œå¦‚æœå»æŸ¥çœ‹è¿™ä¸ªç›®å½•ä¸‹çš„å†…å®¹ï¼Œä¼šå‘ç°é‡Œé¢è¿ä¸ª `node_modules` æ–‡ä»¶éƒ½æ²¡æœ‰ï¼š

  ```text
  â–¾ express
      â–¸ lib
        History.md
        index.js
        LICENSE
        package.json
        Readme.md
  ```

  å®é™…ä¸Šè¿™ä¸ªæ–‡ä»¶åªæ˜¯ä¸ªè½¯è¿æ¥ï¼Œå®ƒä¼šå½¢æˆä¸€ä¸ªåˆ°ç¬¬äºŒä¸ªç›®å½•çš„ä¸€ä¸ªè½¯è¿æ¥(ç±»ä¼¼äºè½¯ä»¶çš„å¿«æ·æ–¹å¼)ï¼Œè¿™æ · node åœ¨æ‰¾è·¯å¾„çš„æ—¶å€™ï¼Œæœ€ç»ˆä¼šæ‰¾åˆ° .pnpm è¿™ä¸ªç›®å½•ä¸‹çš„å†…å®¹ã€‚

  å…¶ä¸­è¿™ä¸ª `.pnpm` æ˜¯ä¸ªè™šæ‹Ÿç£ç›˜ç›®å½•ï¼Œç„¶å express è¿™ä¸ªä¾èµ–çš„ä¸€äº›ä¾èµ–ä¼šè¢«å¹³é“ºåˆ° `.pnpm/express@4.17.1/node_modules/` è¿™ä¸ªç›®å½•ä¸‹é¢ï¼Œè¿™æ ·ä¿è¯äº†ä¾èµ–èƒ½å¤Ÿ require åˆ°ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šå½¢æˆå¾ˆæ·±çš„ä¾èµ–å±‚çº§ã€‚åœ¨ä¿è¯äº† nodejs èƒ½æ‰¾åˆ°ä¾èµ–è·¯å¾„çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶ä¹Ÿå¾ˆå¤§ç¨‹åº¦ä¸Šä¿è¯äº†ä¾èµ–èƒ½å¾ˆå¥½çš„è¢«æ”¾åœ¨ä¸€èµ·ã€‚

#### nodemon

[nodemon](https://links.jianshu.com/go?to=http%3A%2F%2Fnodemon.io%2F) æ˜¯ä¸€ç§å·¥å…·ï¼Œå¯åœ¨æ£€æµ‹åˆ°ç›®å½•ä¸­çš„æ–‡ä»¶æ›´æ”¹æ—¶é€šè¿‡è‡ªåŠ¨é‡æ–°å¯åŠ¨èŠ‚ç‚¹åº”ç”¨ç¨‹åºæ¥å¸®åŠ©å¼€å‘åŸºäº node.js çš„åº”ç”¨ç¨‹åºã€‚

- **å…¨å±€å®‰è£…**

  ``` js
  npm i -g nodemon
  ```

- **æœ¬åœ°å®‰è£…**

  ``` js
  npm i -D nodemon
  ```

  ``` js
  // æœ¬åœ°å®‰è£…åå¯ä»¥é…ç½®è„šæœ¬ä½¿ç”¨nodemon,è¿™é‡Œnodemonåé¢æ²¡æœ‰åŠ æ–‡ä»¶
  // å®ƒä¼šé»˜è®¤åŠ è½½mainä¸­é…ç½®çš„æ–‡ä»¶
  "script": {
      "dev": "nodemon"
  }
  ```

#### anywhere

> Anywhere éšå¯éšç”¨çš„é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œ éšæ—¶éšåœ°å°†ä½ çš„å½“å‰ç›®å½•å˜æˆä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨çš„æ ¹ç›®å½•ã€‚

- å®‰è£…ï¼š

  ``` js
  npm install anywhere -g
  ```

- ä½¿ç”¨ï¼š

  ``` js
  $ anywhere -p 8000  // æŒ‡å®šç«¯å£
  $ anywhere -h localhost -p 8888  // æŒ‡å®šç«¯å£å’Œä¸»æœºå
  $ anywhere -s  // or start it but silent(don't open browser)
  $ anywhere --help
  ```

#### http-server

> `http-server`æ˜¯ä¸€ä¸ªç®€å•çš„ã€é›¶é…ç½®çš„å‘½ä»¤è¡Œé™æ€ HTTP æœåŠ¡å™¨ã€‚å®ƒå¯¹äºç”Ÿäº§ä½¿ç”¨æ¥è¯´è¶³å¤Ÿå¼ºå¤§ï¼Œä½†å®ƒè¶³å¤Ÿç®€å•å’Œå¯ç ´è§£ï¼Œå¯ä»¥ç”¨äºæµ‹è¯•ã€æœ¬åœ°å¼€å‘å’Œå­¦ä¹ ã€‚

- ä½¿ç”¨ `npx` å¯ä»¥è¿è¡Œhttp-serverè€Œæ— éœ€å…ˆå®‰è£…å®ƒï¼š

  ``` js
  npx http-server [path] [options]
  // [path]é»˜è®¤ä¸º./public(å¦‚æœæ–‡ä»¶å¤¹å­˜åœ¨)ï¼Œä¸å­˜åœ¨åˆ™ä¸º./
  ```

- å…¨å±€å®‰è£…ï¼š

  ``` js
  npm install --global http-server
  ```

- **options**

  ``` js
  -p ç«¯å£å· (é»˜è®¤ 8080)
  -a IPåœ°å€ (é»˜è®¤ 0.0.0.0) æŒ‡å®šçš„åœ°å€å¿…é¡»æ˜¯ç©ºé—²çš„ï¼Œå¹¶ä¸”æ˜¯æœ¬æœºçš„ç½‘å¡åœ°å€
  -o åœ¨å¼€å§‹æœåŠ¡åæ‰“å¼€æµè§ˆå™¨
  ```

  

