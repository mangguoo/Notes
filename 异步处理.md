#### 异步加载图片

``` js
function loadImage(src) {
  return new Promise((resolve, reject) => {
    const img = new Image()
    img.src = src
    img.onload = function () {
      resolve(img)
    }
    img.onerror = function () {
      reject(src)
    }
  })
}

;(async function init() {
  const arr = []
  for (let i = 15; i < 19; i++) {
    const img = await loadImage(`./img/img_${i}.JPG`)
    arr.push(img)
  }
  console.log(arr)
})()
```

#### 异步函数中promise报错解决方案

``` js
(async function init() {
  const arr = []
  for (let i = 14; i < 19; i++) {
    try {
      const img = await loadImage(`./img/img_${i}.JPG`)
      // 只有异步没有完成，就一直在这里等待异步完成后再继续向后运行，for循环被阻止同步继续
      arr.push(img)
    } catch (e) {}
  }
  console.log(arr)
})()
```

``` js
(async function init() {
  const arr = []
  for (let i = 14; i < 19; i++) {
    await loadImage(`./img/img_${i}.JPG`)
      .then(function (img) {
        arr.push(img)
      })
      .catch(function (e) {})
  }
  console.log(arr)
})()
```

> 这种写法是错误的，当使用try catch拦截promise中reject时，必须放在async await函数中。因为这个是异步等待后才报错的。

``` js
try {
  loadImage('./img/img_14.JPG').then(function (img) {
    console.log(img)
  })
} catch (e) {
  console.log(e)
}
```

